<?php

require_once __DIR__ . '/vendor/autoload.php';

use Symfony\Component\Dotenv\Dotenv;
use Microservices\Sample\Kernel;
use Symfony\Bundle\FrameworkBundle\Console\Application;

(new Dotenv())->loadEnv(__DIR__ . '/.env');
if (is_readable(__DIR__ . '/.env.local')) {
    (new Dotenv())->loadEnv(__DIR__ . '/.env.local');
}

// var_dump($_SERVER);
// exit();

$env = $_SERVER['APP_ENV'];
$debug = $env === 'dev';
$kernel = new Kernel($env, $debug);
$app = new Application($kernel);

$app->run();
